<!DOCTYPE html>
<html>
<head>
    <title>Digit AI</title>
    <style>
        body { background: #121212; color: white; text-align: center; font-family: sans-serif; }
        canvas { background: white; border: 5px solid #3498db; cursor: crosshair; margin: 20px; }
        .res { font-size: 24px; color: #2ecc71; }
    </style>
</head>
<body>
    <h2>Draw a Digit (0-9)</h2>
    <canvas id="canvas" width="280" height="280"></canvas><br>
    <button onclick="clearCanvas()" style="padding:10px 20px;">Clear</button>
    <div class="res">Prediction: <span id="digit">-</span> (<span id="conf">0</span>%)</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        ctx.lineWidth = 15; ctx.lineCap = 'round'; ctx.strokeStyle = 'black';
        const clearCanvas = () => { ctx.fillStyle = "white"; ctx.fillRect(0,0,280,280); };
        window.onload = clearCanvas;

        canvas.onmousedown = () => drawing = true;
        canvas.onmouseup = () => { drawing = false; ctx.beginPath(); predict(); };
        canvas.onmousemove = (e) => {
            if (!drawing) return;
            const r = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - r.left, e.clientY - r.top);
            ctx.stroke(); ctx.beginPath(); ctx.moveTo(e.clientX - r.left, e.clientY - r.top);
        };

        async function predict() {
            const res = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({image: canvas.toDataURL('image/png')})
            });
            const data = await res.json();
            document.getElementById('digit').innerText = data.digit;
            document.getElementById('conf').innerText = data.confidence;
        }
    </script>
</body>
</html>